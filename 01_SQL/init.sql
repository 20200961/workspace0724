CREATE USER c##ONLINE IDENTIFIED BY ONLINE;
GRANT CONNECT, RESOURCE TO c##ONLINE;
ALTER USER C##ONLINE DEFAULT TABLESPACE USERS QUOTA UNLIMITED ON USERS;


DROP TABLE TEACHER;
DROP TABLE LECTURE;
DROP TABLE STUDENT;
DROP TABLE ENROLLMENT;

CREATE TABLE TEACHER(
    TEACHER_ID NUMBER PRIMARY KEY,
    NAME VARCHAR2(30) NOT NULL,
    EMAIL VARCHAR2(225) NOT NULL CONSTRAINT TEACHER_EMAIL UNIQUE,
    HIRE_DATE DATE,
    SUBJECT VARCHAR2(50)
);

CREATE TABLE LECTURE(
    LECTURE_ID NUMBER PRIMARY KEY,
    TITLE VARCHAR2(80) NOT NULL,
    TEACHER_ID NUMBER, 
    CONSTRAINT LECTURE_FK_TID FOREIGN KEY (TEACHER_ID) REFERENCES TEACHER(TEACHER_ID),
    INDEX_COUNT NUMBER NOT NULL,
    CATEGORY VARCHAR2(50) NOT NULL,
    START_DATE DATE NOT NULL,
    END_DATE DATE
);


CREATE TABLE STUDENT(
    STUDENT_ID NUMBER PRIMARY KEY,
    NAME VARCHAR2(30) NOT NULL,
    GRADE NUMBER NOT NULL,
    EMAIL VARCHAR2(225) CONSTRAINT STUDENT_EMAIL UNIQUE,
    JOIN_DATE DATE NOT NULL
);

CREATE TABLE ENROLLMENT(
    ENROLLMENT_ID NUMBER PRIMARY KEY,
    STUDENT_ID NUMBER NOT NULL,
    CONSTRAINT ENROLL_FK_STUID FOREIGN KEY (STUDENT_ID) REFERENCES STUDENT(STUDENT_ID),
    LECTURE_ID NUMBER NOT NULL, 
    CONSTRAINT ENROLL_FK_LECID FOREIGN KEY (LECTURE_ID) REFERENCES LECTURE(LECTURE_ID),
    ENROLL_DATE DATE NOT NULL,
    STATUS CHAR(1) NOT NULL,
    GRADE_SCORE NUMBER
);

INSERT INTO TEACHER VALUES (1, '최승호', 'sh@naver.com', TO_DATE('2018-03-01', 'YYYY-MM-DD'), '수학');
INSERT INTO TEACHER VALUES (2, '장원석', 'os@naver.com', TO_DATE('2019-03-01', 'YYYY-MM-DD'), '영어');
INSERT INTO TEACHER VALUES (3, '김찬우', 'cu@naver.com', TO_DATE('2020-03-01', 'YYYY-MM-DD') , '과학');
INSERT INTO TEACHER VALUES (4, '홍승의', 'so@naver.com', TO_DATE('2021-05-20', 'YYYY-MM-DD'), '사회');
INSERT INTO TEACHER VALUES (5, '이재민', 'jm@naver.com', TO_DATE('2022-03-01', 'YYYY-MM-DD'), '국어');

INSERT INTO LECTURE VALUES (101, '수학1', 1, 10, '수학', TO_DATE('2024-03-01', 'YYYY-MM-DD'), TO_DATE('2024-06-01', 'YYYY-MM-DD'));
INSERT INTO LECTURE VALUES (102, '영어1', 2, 8, '영어', TO_DATE('2024-04-10', 'YYYY-MM-DD'), TO_DATE('2024-07-20', 'YYYY-MM-DD'));
INSERT INTO LECTURE VALUES (103, '과학1', 3, 12, '과학', TO_DATE('2024-05-01', 'YYYY-MM-DD'), TO_DATE('2024-07-23', 'YYYY-MM-DD'));
INSERT INTO LECTURE VALUES (104, '사회1', 4, 7, '사회', TO_DATE('2024-06-15', 'YYYY-MM-DD'), TO_DATE('2024-09-15', 'YYYY-MM-DD'));
INSERT INTO LECTURE VALUES (105, '국어1', 5, 9, '국어', TO_DATE('2024-07-01', 'YYYY-MM-DD'), TO_DATE('2024-09-22', 'YYYY-MM-DD'));
INSERT INTO LECTURE VALUES (106, '국어2', 5, 9, '국어', TO_DATE('2024-07-01', 'YYYY-MM-DD'), TO_DATE('2024-09-22', 'YYYY-MM-DD'));

INSERT INTO STUDENT VALUES (1001, '김현성', 1, 'hs@naver.com', TO_DATE('2023-03-02', 'YYYY-MM-DD'));
INSERT INTO STUDENT VALUES (1002, '장지민', 2, 'jm@naver.com', TO_DATE('2022-09-01', 'YYYY-MM-DD'));
INSERT INTO STUDENT VALUES (1003, '한승규', 3, 'sg@naver.com', TO_DATE('2021-12-15', 'YYYY-MM-DD'));
INSERT INTO STUDENT VALUES (1004, '김찬송', 1, 'cs@naver.com', TO_DATE('2024-01-10', 'YYYY-MM-DD'));
INSERT INTO STUDENT VALUES (1005, '박준한', 2, 'jh@naver.com', TO_DATE('2023-06-20', 'YYYY-MM-DD'));

INSERT INTO ENROLLMENT VALUES (501, 1001, 101, TO_DATE('2024-03-05', 'YYYY-MM-DD'), 'N', 95);
INSERT INTO ENROLLMENT VALUES (502, 1002, 102, TO_DATE('2024-04-15', 'YYYY-MM-DD'), 'Y', 88);
INSERT INTO ENROLLMENT VALUES (503, 1003, 103, TO_DATE('2024-05-05', 'YYYY-MM-DD'), 'Y', 72);
INSERT INTO ENROLLMENT VALUES (504, 1004, 101, TO_DATE('2024-06-20', 'YYYY-MM-DD'), 'N', 84);
INSERT INTO ENROLLMENT VALUES (505, 1005, 102, TO_DATE('2024-07-05', 'YYYY-MM-DD'), 'N', 91);






































